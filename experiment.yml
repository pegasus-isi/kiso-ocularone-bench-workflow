name: kiso-orcasound-experiment

deployment:
  htcondor:
    - kind: central-manager
      labels:
        - central-manager

    - kind: execute
      labels:
        - execute

    - kind: submit
      labels:
        - submit

software:
  docker:
    labels:
      - execute

sites:
  - kind: vagrant
    backend: virtualbox
    box: bento/rockylinux-9
    user: vagrant
    config_extra: 'config.vm.synced_folder ".", "/vagrant", disabled: true'
    resources:
      machines:
        - labels:
            - submit
            - execute
            - central-manager
          backend: virtualbox
          box: bento/rockylinux-9
          user: vagrant
          number: 1
          flavour_desc:
            core: 8
            mem: 8096
      networks:
        - labels:
            - r1
          cidr: "172.16.42.0/16"

experiments:
  - kind: pegasus
    name: ocularone-bench-workflow
    count: 1
    main: ./run.sh data/ocularone-bench-dataset
    args:
      - example/ocularone-bench-dataset
    submit-node-labels:
      - submit
    timeout: -1
